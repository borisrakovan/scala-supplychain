# Blockchain-based Food Chain Simulation

## About

A supply chain simulation based on the blockchain framework. Its abstract core aims to allow for implementing a broad range of systems built on top of the blockchain technology.


## Running the application

This project is written in Scala.

To run the project, you will need the `sbt` tool installed on your computer 

https://www.scala-sbt.org/1.x/docs/Getting-Started.html

https://docs.scala-lang.org/getting-started/sbt-track/getting-started-with-scala-and-sbt-on-the-command-line.html


Once it is installed and configured to be on your `PATH`, `cd` to the project directory and run 

`$ sbt`

followed by

`> run`

This should compile the source code and run the simulation.

In case you experience issues while setting up the environment, this video guide was used to setup the project and could help you

(specifically the *Environment setup* part that starts at 15:38)

https://www.youtube.com/watch?v=-xRfJcwhy7A&t=6625s&ab_channel=DevInsideYou


---

The **run_output.txt** file contains an example output that was generated by the program. 

## Structure

The project is organized as follows:

`blockchain`  package contains classes and traits related to the implementation of the blockchain protocol

`ecosystem` package contains classes that create and orchestrate the simulation, the main simulation loop and the interaction with the user via the user interface

`foodchain` package contains definitions of the parties, food materials, operations, implementations of specific blockchain transactions etc

`reports` package contains logic related to generating different types of reports

`utils` package contains some utility classes used across the application

`Config.scala` is the main configuration file of the system. See the comments in the file for more details.

`Main.scala` is the entrypoint of the program


## Software design

This section contains a list of some design patterns that are used is the project:


- **Mediator** - the `EcosystemNetwork` (Mediator) defines an interface for communicating with the `Node` (Colleague) objects

- **Simple factory** - `EcosystemFactory` class creates `Ecosystem` objects without exposing the instantiation logic to the client

- **Singleton** - Both `Logger` and `Config` classes are singletons (in scala, basically every "class" defined with the "object" keyword is a sigleton)

- **Chain of responsibility** - `Channel` passess requests along a chain of `FoodChainParty` objects (Handlers). Upon receiving a request, each party decides either to process the request or to pass it to the next handler in the chain

- **Strategy** - `PricingStrategy` (Strategy) defines an interchangeable family of algorithms. Different `FoodOperation`s (Context) then apply different pricing strategies to the food materials on which they operate.

- **Visitor** - `PartyBehaviour` (Visitor) defines an interface for `HostileBehaviour` (ConcreteVisitor) that is passed to the `FoodchainParty` (Element) to perform some action. New behaviours can be added without changing the `FoodChainParty` class.

- **Monad** - monads such as `Option`/`Try`/`Either` are used widely across the whole application


Other design principles, such as SOLID, generics, cohesion and coupling, along with functional programming principles such as immutability, statelessness and referential transparency were carefully followed while building the application. 


## References

Following resources were used as a reference when implementing the blockchain framework

[https://www.signifytechnology.com/blog/2018/02/a-look-at-scorex-a-scala-blockchain-framework](https://www.signifytechnology.com/blog/2018/02/a-look-at-scorex-a-scala-blockchain-framework)

[https://github.com/hyperledger-labs/Score](https://github.com/hyperledger-labs/Scorex)

[https://github.com/ScorexFoundation/ScorexTutorial/blob/master/scorex.pdf](https://github.com/ScorexFoundation/ScorexTutorial/blob/master/scorex.pdf) 

[https://www.oreilly.com/library/view/mastering-bitcoin/9781491902639/ch05.html](https://www.oreilly.com/library/view/mastering-bitcoin/9781491902639/ch05.html)

[https://ethereum.org/en/whitepaper/](https://ethereum.org/en/whitepaper/)